#!/bin/sh 
# redirects.test - tests to make sure that the proper directory structure and redirect files are created
. "ShUnit/shUnit"

# Include script to be tested 
. ./../redirects.sh

TestScriptExists()
{
	shuNonZeroFile "../redirects.sh"
}

TestPrintRedirectScript()
{
    EXPECTED="<html><head><meta http-equiv=\"Refresh\" content=\"2;url=http://www.google.com\" /></head><body><p>This post has moved. Now directing you to the new site. If you are not redirected in the next 5 seconds, please click <a href =\"http://www.google.com\">here</a></p></body></html>"
	ARG="http://www.google.com"
    RESULT=`print_redirect_script "$ARG"`
    test "${EXPECTED}" = "${RESULT}" 
    shuAssert "Test test_function" $?
} 

InitFunction()
{ 
    shuRegTest TestScriptExists
    shuRegTest TestPrintRedirectScript 
} 

shuStart InitFunction